/*! perfect-scrollbar - v0.4.1
* http://noraesae.github.com/perfect-scrollbar/
* Copyright (c) 2013 HyeonJe Jun; Licensed MIT */
!function(t){var e={wheelSpeed:10,wheelPropagation:!1,marginTop:0,marginBottom:0};t.fn.perfectScrollbar=function(r,a){return this.each(function(){var n=t.extend(!0,{},e);if("object"==typeof r?t.extend(!0,n,r):a=r,"update"===a)return t(this).data("perfect-scrollbar-update")&&t(this).data("perfect-scrollbar-update")(),t(this);if("destroy"===a)return t(this).data("perfect-scrollbar-destroy")&&t(this).data("perfect-scrollbar-destroy")(),t(this);if(t(this).data("perfect-scrollbar"))return t(this).data("perfect-scrollbar");var i,l,s,o,c,g,p,b,u,h=t(this).addClass("ps-container"),d=t("<div class='ps-scrollbar-x'></div>").appendTo(h),m=t("<div class='ps-scrollbar-y'></div>").appendTo(h),f=parseInt(d.css("bottom"),10),v=parseInt(m.css("right"),10),y=n.marginTop,w=n.marginBottom,$=function(){var t=parseInt((b-y)*(o/l)/u,10);h.scrollTop(t),d.css({bottom:f-t})},C=function(){var t=parseInt(g*s/i,10);h.scrollLeft(t),m.css({right:v-t})},I=function(){d.css({left:g+h.scrollLeft(),bottom:f-h.scrollTop(),width:c}),m.css({top:b+h.scrollTop(),right:v-h.scrollLeft(),height:p})},T=function(){i=h.width(),l=h.height(),containerOuterHeight=h.outerHeight(),s=h.prop("scrollWidth"),o=h.prop("scrollHeight"),u=(l-y-w)/l,s>i?(c=parseInt(i*i/s,10),g=parseInt(h.scrollLeft()*i/s,10)):(c=0,g=0,h.scrollLeft(0)),o>containerOuterHeight?(p=parseInt(l*l/o,10),b=parseInt(h.scrollTop()*l/o,10),b>=l-p&&(b=l-p),b=parseInt(b*u,10),p=parseInt(p*u,10),b+=y):(p=0,b=0,h.scrollTop(0)),g>=i-c&&(g=i-c),I()},x=function(t,e){var r=t+e,a=i-c;g=0>r?0:r>a?a:r,d.css({left:g+h.scrollLeft()})},k=function(t,e){var r=t+e,a=y,n=l-p-w;b=a>r?a:r>n?n:r,m.css({top:b+h.scrollTop()})},E=function(){var e,r;d.bind("mousedown.perfect-scroll",function(t){r=t.pageX,e=d.position().left,d.addClass("in-scrolling"),t.stopPropagation(),t.preventDefault()}),t(document).bind("mousemove.perfect-scroll",function(t){d.hasClass("in-scrolling")&&(C(),x(e,t.pageX-r),t.stopPropagation(),t.preventDefault())}),t(document).bind("mouseup.perfect-scroll",function(){d.hasClass("in-scrolling")&&d.removeClass("in-scrolling")})},H=function(){var e,r;m.bind("mousedown.perfect-scroll",function(t){r=t.pageY,e=m.position().top,m.addClass("in-scrolling"),t.stopPropagation(),t.preventDefault()}),t(document).bind("mousemove.perfect-scroll",function(t){m.hasClass("in-scrolling")&&($(),k(e,t.pageY-r),t.stopPropagation(),t.preventDefault())}),t(document).bind("mouseup.perfect-scroll",function(){m.hasClass("in-scrolling")&&m.removeClass("in-scrolling")})},S=function(){var t=function(t,e){var r=h.scrollTop();if(0===r&&e>0&&0===t)return!n.wheelPropagation;if(r>=o-l&&0>e&&0===t)return!n.wheelPropagation;var a=h.scrollLeft();return 0===a&&0>t&&0===e?!n.wheelPropagation:a>=s-i&&t>0&&0===e?!n.wheelPropagation:!0};h.bind("mousewheel.perfect-scroll",function(e,r,a,i){h.scrollTop(h.scrollTop()-i*n.wheelSpeed),h.scrollLeft(h.scrollLeft()+a*n.wheelSpeed),T(),t(a,i)&&e.preventDefault()})},M=function(){var e=function(t,e){h.scrollTop(h.scrollTop()-e),h.scrollLeft(h.scrollLeft()-t),T()},r={},a=0,n={},i=null,l=!1;t(window).bind("touchstart.perfect-scroll",function(){l=!0}),t(window).bind("touchend.perfect-scroll",function(){l=!1}),h.bind("touchstart.perfect-scroll",function(t){var e=t.originalEvent.targetTouches[0];r.pageX=e.pageX,r.pageY=e.pageY,a=(new Date).getTime(),null!==i&&clearInterval(i),t.stopPropagation()}),h.bind("touchmove.perfect-scroll",function(t){if(!l&&1===t.originalEvent.targetTouches.length){var i=t.originalEvent.targetTouches[0],s={};s.pageX=i.pageX,s.pageY=i.pageY;var o=s.pageX-r.pageX,c=s.pageY-r.pageY;e(o,c),r=s;var g=(new Date).getTime();n.x=o/(g-a),n.y=c/(g-a),a=g,t.preventDefault()}}),h.bind("touchend.perfect-scroll",function(){i=setInterval(function(){return Math.abs(n.x)<.01&&Math.abs(n.y)<.01?(clearInterval(i),void 0):(e(30*n.x,30*n.y),n.x*=.8,n.y*=.8,void 0)},10)})},L=function(){d.remove(),m.remove(),h.unbind(".perfect-scroll"),t(window).unbind(".perfect-scroll"),h.data("perfect-scrollbar",null),h.data("perfect-scrollbar-update",null),h.data("perfect-scrollbar-destroy",null)},z=function(e){h.addClass("ie").addClass("ie"+e);var r=function(){var e=function(){t(this).addClass("hover")},r=function(){t(this).removeClass("hover")};h.bind("mouseenter.perfect-scroll",e).bind("mouseleave.perfect-scroll",r),d.bind("mouseenter.perfect-scroll",e).bind("mouseleave.perfect-scroll",r),m.bind("mouseenter.perfect-scroll",e).bind("mouseleave.perfect-scroll",r)},a=function(){I=function(){d.css({left:g+h.scrollLeft(),bottom:f,width:c}),m.css({top:b+h.scrollTop(),right:v,height:p}),d.hide().show(),m.hide().show()},$=function(){var t=parseInt(b*o/l,10);h.scrollTop(t),d.css({bottom:f}),d.hide().show()},C=function(){var t=parseInt(g*s/i,10);h.scrollLeft(t),m.hide().show()}};6===e&&(r(),a())},D="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,_=function(){var t=navigator.userAgent.toLowerCase().match(/(msie) ([\w.]+)/);t&&"msie"===t[1]&&z(parseInt(t[2],10)),T(),E(),H(),D&&M(),h.mousewheel&&S(),h.data("perfect-scrollbar",h),h.data("perfect-scrollbar-update",T),h.data("perfect-scrollbar-destroy",L)};return _(),h})}}(jQuery);