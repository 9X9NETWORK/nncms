Revision: 352
Author: chihwen
Date: 上午 11:19:52, 2012年10月25日
Message:
重構版本 350 中，針對 curation.js「調整 Title Card 畫面結構」的部份作改進

新增 wrapTitleCardCanvas() 將包裹 Title Card 結構的邏輯集中獨立出來
issue 5379
----
Modified : /titlecard/javascripts/curation.js


Revision: 350
Author: chihwen
Date: 上午 12:01:25, 2012年10月25日
Message:
調整 Title Card 畫面結構，以因應 Title Card 外掛升級 v1.6.0 後，會自動補白上下或左右導致跑版問題

1. 調整 Title Card 畫面結構，以因應 Title Card 外掛升級 v1.6.0 後，會自動補白上下或左右導致跑版問題。
2. 同步 trunk 分支版本 349 (改良 Title Card 外掛，版本更新為 v1.6.0)。
issue 5379
----
Modified : /titlecard/javascripts/curation.js
Modified : /titlecard/javascripts/jquery.titlecard.js


Revision: 349
Author: chihwen
Date: 下午 10:49:24, 2012年10月24日
Message:
改良 Title Card 外掛，版本更新為 v1.6.0

1. 同時偵測寬度及高度，以寬高差距，決定要以寬度換算高度，還是以高度推算寬度。
2. 要考量上述偵測到的寬度及高度，要讓 Title Card 區塊保持 16:9 並居中呈現，左右兩邊或上下兩邊再補上黑邊。
3. 改良背景顏色與背景圖片切換問題，以因應當背景圖為空時 API 會自動補上系統預設背景圖，進而造成背景顏色無法呈現的問題。
4. 調整套用範例，以測試及驗證外掛各項功能。
issue 5085
----
Modified : /trunk/javascripts/jquery.titlecard.js
Modified : /trunk/titlecard-player-jquery-plugin-demo.html


Revision: 348
Author: chihwen
Date: 下午 06:30:56, 2012年10月24日
Message:
jQuery Title Card Player 字卡播放器外掛開發

測試改良 Title Card 結構雛型，以便適應前端 playback 在呈現畫面上，可能會有 Fit, Wide, Narrow 三種情境的狀況。
1. 同時偵測寬度及高度，以寬高差距，決定要以寬度換算高度，還是以高度推算寬度。
2. 要考量上述偵測到的寬度及高度，要讓 Title Card 區塊保持 16:9 並居中呈現，左右兩邊或上下兩邊再補上黑邊。

作法如下：
1. 在最外層加入 wrapper-canvas 結構，並重新 review 行為結構設定。
   <div class="wrapper-canvas" style="display: block; width: 100%; height: 100%; background-color: #000;">
2. wrapper-outer => 統一加入 margin: 0 auto; 樣式，以便實現 canvas 居中呈現。
3. 要動態偵測外框寬高，來決定以寬推算高，還是以高推算寬，再以 16:9 比例，設定 wrapper-outer 寬高。
   特別留意 narrow 版本
   wrapper-outer => float: left;
   wrapper-outer => margin-top = (外框高度 - wrapper-outer高度) / 2
4. wrapper-inner => 統一設定 left: 1%;
issue 5085
----
Modified : /trunk/titlecard-player-jquery-plugin-prototype.html


Revision: 347
Author: chihwen
Date: 下午 12:44:23, 2012年10月23日
Message:
同步 fakeapi 分支版本 346

調整 config.js 將 fake api 集中，並依各環境切換設定。
1. development: DS 開發環境。
2. demonstration: DS 開發端測試環境。
3. testing: 9x9.tv 正式端測試環境。
4. production: 9x9.tv 正式環境。
issue 5379
----
Modified : /titlecard/javascripts/config.js


Revision: 345
Author: chihwen
Date: 上午 02:18:35, 2012年10月23日
Message:
將設定檔 CMS_ENV 切換為 testing 正式端測試環境 (for 9x9 dev website)
issue 5379
----
Modified : /titlecard/javascripts/config.js


Revision: 344
Author: chihwen
Date: 上午 02:14:52, 2012年10月23日
Message:
同步 fakeapi 分支版本 343 (建立 9x9 fake API 站台，以便模擬正式機環境，並取代 src 版型管控)
issue 5379
----
Modified : /titlecard/episode-list.html
Modified : /titlecard/index.html
Modified : /titlecard/javascripts/channel.js
Modified : /titlecard/javascripts/config.js
Modified : /titlecard/javascripts/episode.js


Revision: 340
Author: chihwen
Date: 下午 06:05:52, 2012年10月22日
Message:
將 CMS API URI 集中設定管理，並實作 API URI 包裝函式

1. 將 CMS_CONF 設定檔獨立成 config.js 以便統一管理及共用設定。
   在引入任何客製化的商業邏輯 js 前，先統一引入 config.js 例如在 basic.js 之前。
2. 新增 CMS_CONF.CMS_ENV 環境變數，以便未來依環境切換設定之用。
   1. development: 開發環境。
   2. demonstration: 開發端測試環境。
   3. testing: 正式端測試環境。
   4. production: 正式環境。
3. 新增 CMS_CONF.API_PACK 將 CMS API URI 集中設定管理。
4. 新增 CMS_CONF.API() 實作 API URI 包裝函式，以便未來依環境切換正式 API 與 fake API 之用。
5. 將所有使用到 CMS API URI 字串的地方，改串接 API URI 包裝函式。
issue 5379
----
Modified : /titlecard/channel-add.html
Modified : /titlecard/channel-setting.html
Modified : /titlecard/epcurate-curation.html
Modified : /titlecard/epcurate-info.html
Modified : /titlecard/epcurate-publish.html
Modified : /titlecard/episode-list.html
Modified : /titlecard/index.html
Modified : /titlecard/javascripts/basic.js
Modified : /titlecard/javascripts/channel.js
Added : /titlecard/javascripts/config.js
Modified : /titlecard/javascripts/controller.js
Modified : /titlecard/javascripts/curation.js
Modified : /titlecard/javascripts/epcurate.js
Modified : /titlecard/javascripts/episode.js
Modified : /titlecard/login.html


Revision: 339
Author: chihwen
Date: 下午 12:49:12, 2012年10月22日
Message:
改良背景顏色與背景圖片切換問題 (因應 API 會自動補上預設背景圖)

1. 將 CMS_CONF.TITLECARD_DEFAULT_IMAGE 更名為 CMS_CONF.TITLECARD_DEFAULT_IMAGE_BY_SYSTEM 代表由系統 API 自動補上的預設圖。
   TITLECARD_DEFAULT_IMAGE_BY_SYSTEM: http://9x9ui.s3.amazonaws.com/war/v0/images/titlecard-default.png
2. 新增 CMS.CONF.TITLECARD_DEFAULT_IMAGE_BY_UPLOAD 代表明確由上傳機制，所更新上去的預設圖片。
   TITLECARD_DEFAULT_IMAGE_BY_UPLOAD: http://s3.amazonaws.com/9x9ui/war/v0/images/titlecard-default.png
3. 因應 API 會自動補上預設背景圖，藉由上述設定，可明確分離，是系統自動補上的預設圖，還是明確上傳的預設圖，
   在 epcurate-curation.html 模板中，調整版型在「背景顏色與背景圖片切換」的判斷邏輯。
   1. 若背景圖片不為空，而且背景顏色為空，才出現背景圖片。
   2. 若背景圖片不為空，而且背景顏色不為空，而且背景圖片不為系統自動補上的預設圖，才出現背景圖片。
issue 5379
----
Modified : /titlecard/epcurate-curation.html
Modified : /titlecard/javascripts/controller.js


Revision: 338
Author: chihwen
Date: 上午 10:10:19, 2012年10月22日
Message:
由於 9x9 nn.api 本身已有防快取機制，故移除先前加上的 anticache=時間戳記，以簡化程式
issue 5379
----
Modified : /titlecard/javascripts/channel.js
Modified : /titlecard/javascripts/controller.js
Modified : /titlecard/javascripts/curation.js
Modified : /titlecard/javascripts/epcurate.js


Revision: 335
Author: chihwen
Date: 下午 11:17:39, 2012年10月21日
Message:
重構 curation.js 更換名稱、調整順序、集中整併、新增函式以改良行為並簡化語意、修正非預期錯誤

1. 重構 curation.js 更換名稱、調整順序、集中整併、新增函式以改良行為並簡化語意、修正非預期錯誤。
   1. 將 deleteIdList 更名為 videoDeleteIdList 以更符合語意。
   2. 新增 addVideoPlayingHook() 及 addTitleCardEditHook() 以簡化並增強行為語意。
   3. 將 TITLECARD_DEFAULT 更名為 TITLECARD_DEFAULT_OPTION 以更符合語意。
   4. 改良 Title Card play 按鈕，將 titlecard 編輯模式明確與 video 播放模式分離，以避免產生非預期錯誤。
   5. 利用 titlecard callback 機制，將 animateTitleCardProgressOnly() 整併為 animateTitleCardProgress() 以簡化行為。
   6. 將 demoElemt 更名為 element 以便更加通用。
   7. 將 Save 機制中的 i 變數，更名為 idx 以更符合語意。
   8. 改良 setSpace() 順序以強化語意，並修正在 1024 下，textarea 不會置中的問題。
   9. 改良 onYouTubePlayerStateChange() 將邏輯集中並共用 playTitleCardAndVideo() 以簡化行為邏輯。
   10. 將函式中的 elemtli 參數更名為 element 以便更加通用。
   11. 改良 cancelTitleCard() 順序以強化語意。
   12. 更換 switchFontAlign() 及 switchBackground() 的參數名稱，以強化語意。
2. 校正 curation.js 調整 Save 機制中的 isInsertMode 新增模式，修正從 DOM 中取得 titlecard 物件索引錯誤問題。
   這個修正可以避免在新增模式下，都以 DOM 中第一筆 video 的 titlecard 物件為主，造成資料錯誤。
3. 校正 controller.js 修正 channel list 中最愛頻道的第一張大圖取圖邏輯，由於最愛頻道無法更新頻道圖片，
   所以維持從 moreImageUrl 分割取值。這個修正可以避免最愛頻道的第一張圖永遠都是系統預設圖。
4. 調整 controller.js 將系統用預設圖片集中到 CMS_CONF 中，以便調整及共用。
   1. TITLECARD_DEFAULT_IMAGE: http://9x9ui.s3.amazonaws.com/war/v0/images/titlecard-default.png
   2. EPISODE_DEFAULT_IMAGE: http://s3.amazonaws.com/9x9ui/war/v0/images/episode-default.png
   3. CHANNEL_DEFAULT_IMAGE: images/episode_default1.png
   4. CHANNEL_DEFAULT_IMAGE2: images/episode_default2.png
5. 調整 epcurate-curation.html 移除用不到的 vertical.slider 用結構。
6. 調整 ep-curation.css 橫向 scrollbar 高度，以避免在 1024x768 下，幾乎快壓到 video 的文案。
issue 5379
----
Modified : /titlecard/epcurate-curation.html
Modified : /titlecard/index.html
Modified : /titlecard/javascripts/controller.js
Modified : /titlecard/javascripts/curation.js
Modified : /titlecard/stylesheets/ep-curation.css


Revision: 333
Author: chihwen
Date: 下午 10:33:02, 2012年10月19日
Message:
調整 video info 切換時機，在開頭 Title Card 開始播放時，就呈現該影片資訊

1. 調整 video info 切換時機，在開頭 Title Card 開始播放時，就呈現該影片資訊。
2. 同步 src 分支版本 331 (TODO：注意此版本尚未同步完)。
   調整 video-control 的樣式，以便讓未來客製化 video-control 時，在 UI 上可以相容 (youtube chromeless player)。
issue 5379
----
Modified : /titlecard/epcurate-curation.html
Modified : /titlecard/javascripts/curation.js
Modified : /titlecard/stylesheets/ep-curation.css


Revision: 332
Author: chihwen
Date: 下午 08:36:40, 2012年10月19日
Message:
在影片播放模式下，加入前後 Title Card 的暫停及重新播放功能

1. 在影片播放模式下，加入前後 Title Card 的暫停及重新播放功能。
2. 在影片播放模式下，若全部播放完畢後，就自動還原回最初的 Add Video 畫面。
issue 5379
----
Modified : /titlecard/javascripts/curation.js

